"use strict";(self.webpackChunknhia_client=self.webpackChunknhia_client||[]).push([[7400],{82447:function(e,r,n){n.a(e,(async function(e,t){try{n.d(r,{Z:function(){return w}});var i=n(74165),s=n(15861),c=n(29439),a=n(72791),o=n(36151),d=n(38372),l=n(5289),u=n(97123),h=n(39157),x=n(51691),N=n(65661),f=n(30459),j=n(2323),v=n(99126),p=n(72426),m=n.n(p),Z=n(57689),E=n(80184),g=e([v]);function w(){var e=a.useState(!1),r=(0,c.Z)(e,2),n=r[0],t=r[1],p=(0,Z.s0)(),g=function(){t(!1)},y=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{""===(n=document.getElementById("code").value)||null===n?(0,f.Z)("Please enter valid registration Code","error"):(0,j.JE)(v.Z.get("/code/".concat(n,"/"),{}).then((function(e){var r=e.data;null===r?(0,f.Z)("Invalid Regitration code found!","error"):m()().subtract(Date(r.user_rrr.expired_date),"years")<0?(0,f.Z)("Registration has expired","error"):p("/form/register/add",{state:r.user_rrr})})).catch((function(e){(0,f.Z)(e,"error")})))}catch(r){(0,f.Z)(r,"error")}case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,E.jsxs)("div",{children:[(0,E.jsx)(o.Z,{variant:"outlined",onClick:function(){t(!0)},children:"Registration"}),(0,E.jsxs)(l.Z,{open:n,onClose:g,children:[(0,E.jsx)(N.Z,{children:"REGISTRATION CODE"}),(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(x.Z,{children:"Please enter the registration code sent to you to continue"}),(0,E.jsx)(d.Z,{autoFocus:!0,margin:"dense",id:"code",label:"Registration Code",type:"text",fullWidth:!0,variant:"standard"})]}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)(o.Z,{onClick:g,children:"Cancel"}),(0,E.jsx)(o.Z,{onClick:y,children:"Continue"})]})]})]})}v=(g.then?(await g)():g)[0],t()}catch(y){t(y)}}))},28664:function(e,r,n){n.a(e,(async function(e,r){try{n(72791),n(77763);var t=n(99126),i=(n(30459),n(2323),n(56848),n(80184),e([t]));t=(i.then?(await i)():i)[0],r()}catch(s){r(s)}}))},56848:function(e,r,n){n.d(r,{x:function(){return t}});var t=(0,n(25984).kP)("1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ0987654321",10)},67222:function(e,r,n){n.d(r,{Z:function(){return t},g:function(){return i}});var t=1,i=30},97400:function(e,r,n){n.a(e,(async function(e,t){try{n.r(r);var i=n(74165),s=n(15861),c=n(29439),a=n(99126),o=n(72791),d=n(1012),l=n(57689),u=n(11087),h=n(82447),x=n(28664),N=n(1582),f=n(57246),j=(n(2323),n(67222)),v=n(30459),p=n(72426),m=n.n(p),Z=n(78983),E=n(59930),g=n(80184),y=e([a,d,h,x,E]);[a,d,h,x,E]=y.then?(await y)():y;r.default=function(){var e=(0,o.useState)([]),r=(0,c.Z)(e,2),n=r[0],t=r[1],x=(0,o.useState)(0),p=(0,c.Z)(x,2),y=p[0],w=p[1],M=o.useState(1),R=(0,c.Z)(M,2),I=R[0],S=R[1],_=(0,o.useState)([]),C=(0,c.Z)(_,2),O=C[0],k=C[1],D=(0,o.useState)(0),b=(0,c.Z)(D,2),T=(b[0],b[1]),L=(0,o.useState)(0),P=(0,c.Z)(L,2),A=(P[0],P[1]),B=(0,o.useState)(!1),H=(0,c.Z)(B,2),U=(H[0],H[1]),F=(0,o.useContext)(d.V),V=F.currentUser,z=F.permissions,Y=(0,l.s0)(),W=null===V||void 0===V?void 0:V.id;(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get("/forms/register/".concat(j.Z,"/").concat(j.g)).then((function(e){t(null===e||void 0===e?void 0:e.data.res),k(e.data)})).catch((function(e){(0,v.Z)("Error occured while trying loading data","error")}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,v.Z)("Error occured while trying loading data. Reason:"+e.t0,"error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(r){return e.apply(this,arguments)}}();e();var r=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get("/register/".concat(W,"/userId"));case 3:n=e.sent,w(null===n||void 0===n?void 0:n.data.length),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),n=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/".concat(V.id,"/user-rrr/getuserid/rrr/rrr/")).then((function(e){var r=m()(e.data.expired_date).format("YYYY MM");m()().diff(r,"days")<0&&a.Z.get("/codes/".concat(e.data.id,"/code/rrr/")).then((function(r){A(e.data.maxNumber),r.data.count<e.data.maxNumber&&U(!0),T(r.data.rows[0].user_rrrId)})).catch((function(e){}))})).catch((function(e){(0,v.Z)(e,"error")}));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();r(),n()}),[W,Y]);var G=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(n),e.prev=1,e.next=4,a.Z.get("/forms/register/".concat(I,"/").concat(j.g)).then((function(e){t(null===e||void 0===e?void 0:e.data.res),k(e.data)})).catch((function(e){(0,v.Z)("Error occured while trying loading data","error")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),(0,v.Z)("Error occured while trying loading data. Reason:"+e.t0,"error");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,g.jsx)(Z.rb,{children:(0,g.jsx)(Z.b7,{xs:12,children:(0,g.jsxs)(Z.xH,{className:"mb-12",children:[(0,g.jsx)(Z.bn,{style:{backgroundColor:"skyblue"},children:(0,g.jsx)("strong",{style:{color:"white"},children:"LIST OF ENROLEES"})}),(0,g.jsxs)(Z.sl,{children:[(0,g.jsx)("p",{className:"text-medium-emphasis small",children:"Using the Add New button to create new Enrolee."}),(0,g.jsx)(E.q3,{href:"",add:"Enrolee List"}),(0,g.jsxs)("span",{style:{width:"100%",display:"flex",flexDirection:"row",gap:"10px"},children:[y>0?"":(0,g.jsx)(h.Z,{}),"   "," "]}),(0,g.jsxs)(Z.Sx,{striped:!0,style:{fontSize:"12px"},align:"middle",responsive:!0,children:[(0,g.jsx)(Z.V,{children:(0,g.jsxs)(Z.T6,{children:[(0,g.jsx)(Z.NN,{children:"ID No#"}),(0,g.jsx)(Z.NN,{children:"SURNAME"}),(0,g.jsx)(Z.NN,{children:"OTHERNAME"}),(0,g.jsx)(Z.NN,{children:"MIDDLE NAME"}),(0,g.jsx)(Z.NN,{children:"SEX"}),(0,g.jsx)(Z.NN,{children:"MOBILE"}),(0,g.jsx)(Z.NN,{children:"EMAIL"}),(0,g.jsx)(Z.NN,{children:"PRIMARY HEALTHCARE "}),(0,g.jsx)(Z.NN,{children:"EDITEDBY"}),(0,g.jsx)(Z.NN,{})]})}),(0,g.jsx)(Z.NR,{children:(null===z||void 0===z?void 0:z.indexOf("VIEW_ALL_MEMBERS"))>-1?0===n.length?"":n.map((function(e){return(0,g.jsxs)(Z.T6,{children:[(0,g.jsx)(Z.NN,{children:e.idCode}),(0,g.jsx)(Z.NN,{children:e.surname}),(0,g.jsx)(Z.NN,{children:e.lastname}),(0,g.jsx)(Z.NN,{children:e.middlename}),(0,g.jsx)(Z.NN,{children:e.sex}),(0,g.jsx)(Z.NN,{children:e.phone}),(0,g.jsx)(Z.NN,{children:e.email}),(0,g.jsxs)(Z.NN,{children:[e.hospital.hospitalCode," - ",e.hospital.name]}),(0,g.jsx)(Z.NN,{children:e.user.surname+" "+e.user.othername}),(0,g.jsx)(Z.NN,{}),(0,g.jsx)(Z.NN,{children:(0,g.jsxs)(Z.Z0,{children:[(null===z||void 0===z?void 0:z.indexOf("EDIT_MEMBERSHIP_FORM"))>-1?(0,g.jsxs)(Z.u5,{color:"secondary",size:"sm",children:[" ",(0,g.jsx)(u.rU,{to:"/".concat(0,"/register/"),state:e.id,className:"edit",style:{color:"white",textDecoration:"none"},children:" Edit"})]}):"",(null===z||void 0===z?void 0:z.indexOf("VIEW_MEMBERSHIP_FORM"))>-1?(0,g.jsxs)(Z.u5,{color:"info",size:"sm",children:[" ",(0,g.jsx)(u.rU,{to:"/".concat(e.id,"/register/3"),state:e.id,className:"view",style:{color:"white",textDecoration:"none"},children:"View"})]}):"",(null===z||void 0===z?void 0:z.indexOf("DELETE_MEMBERSHIP_FORM"))>-1?(0,g.jsx)(Z.u5,{color:"danger",size:"sm",children:(0,g.jsx)(u.rU,{to:"/delete",state:e.id+"&/form/register&/register/",className:"delete",style:{color:"white",textDecoration:"none"},children:"Delete"})}):""]})})]},e.id)})):0===n.length?"":n.map((function(e){return(null===V||void 0===V?void 0:V.id)!==e.userId?null:(0,g.jsxs)(Z.T6,{children:[(0,g.jsx)(Z.NN,{children:e.idCode}),(0,g.jsx)(Z.NN,{children:e.surname}),(0,g.jsx)(Z.NN,{children:e.lastname}),(0,g.jsx)(Z.NN,{children:e.middlename}),(0,g.jsx)(Z.NN,{children:e.sex}),(0,g.jsx)(Z.NN,{children:e.phone}),(0,g.jsx)(Z.NN,{children:e.email}),(0,g.jsxs)(Z.NN,{children:[e.hospital.hospitalCode," - ",e.hospital.name]}),(0,g.jsx)(Z.NN,{children:e.user.surname+" "+e.user.othername}),(0,g.jsx)(Z.NN,{}),(0,g.jsx)(Z.NN,{children:(0,g.jsxs)(Z.Z0,{children:[(null===z||void 0===z?void 0:z.indexOf("EDIT_MEMBERSHIP_FORM"))>-1?(0,g.jsx)(Z.u5,{color:"secondary",size:"sm",children:(0,g.jsx)(u.rU,{to:"/".concat(0,"/register/"),state:e.id,className:"edit",children:" Edit"})}):"",(null===z||void 0===z?void 0:z.indexOf("VIEW_MEMBERSHIP_FORM"))>-1?(0,g.jsx)(Z.u5,{color:"info",size:"sm",children:(0,g.jsx)(u.rU,{to:"/".concat(e.id,"/register/3"),state:e.id,className:"view",children:"View"})}):"",(null===z||void 0===z?void 0:z.indexOf("DELETE_MEMBERSHIP_FORM"))>-1?(0,g.jsx)(Z.u5,{color:"danger",size:"sm",children:(0,g.jsx)(u.rU,{to:"/delete",state:e.id+"&/form/register&/register/",className:"delete",children:"Delete"})}):""]})})]},e.id)}))})]}),(0,g.jsx)(N.Z,{spacing:2,children:(0,g.jsx)(f.Z,{count:O.totalPages,page:I,onChange:G,variant:"outlined",shape:"rounded",color:"secondary"})})]})]})})})},t()}catch(w){t(w)}}))}}]);
//# sourceMappingURL=7400.52a0217b.chunk.js.map