"use strict";(self.webpackChunknhia_client=self.webpackChunknhia_client||[]).push([[7538],{25781:function(e,n,t){var r=t(59860),a=t(57689),i=t(86711),s=t(80184);n.Z=function(e){var n=(0,a.s0)();return(0,s.jsx)(r.Z,{color:"secondary",onClick:function(t){n(e.url)},variant:"contained",style:{backgroundColor:"gray"},endIcon:(0,s.jsx)(i.Z,{}),loadingPosition:"end",children:(0,s.jsx)("span",{children:"CANCEL"})})}},56848:function(e,n,t){t.d(n,{x:function(){return r}});var r=(0,t(25984).kP)("1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ0987654321",10)},5985:function(e,n){n.Z="https://"},47538:function(e,n,t){t.a(e,(async function(e,r){try{t.r(n);var a=t(4942),i=t(1413),s=t(74165),o=t(15861),c=t(29439),u=t(99126),d=t(72791),l=t(1012),p=t(57689),f=t(25781),h=t(72426),m=t.n(h),v=(t(2323),t(30459)),x=t(1582),g=t(59860),Z=t(21686),y=t(5985),b=t(78983),j=t(59930),k=t(56848),I=t(80184),w=e([u,l,j]);[u,l,j]=w.then?(await w)():w;n.default=function(){var e=(0,d.useContext)(l.V),n=e.currentUser,t=e.permissions,r=(0,d.useState)(!1),h=(0,c.Z)(r,2),w=h[0],P=h[1],S=(0,d.useState)([]),M=(0,c.Z)(S,2),C=M[0],R=M[1],E=(0,d.useState)([]),N=(0,c.Z)(E,2),O=(N[0],N[1]),Y=(0,d.useState)(""),A=(0,c.Z)(Y,2),_=A[0],B=A[1],T=(0,d.useState)(n.email),D=(0,c.Z)(T,2),L=D[0],F=(D[1],(0,d.useState)(!1)),G=(0,c.Z)(F,2),U=G[0],q=G[1],z=(0,d.useState)(""),X=(0,c.Z)(z,2),V=X[0],$=X[1],H=(0,d.useState)(0),J=(0,c.Z)(H,2),K=J[0],Q=J[1],W=(0,p.s0)(),ee=(0,d.useState)([]),ne=(0,c.Z)(ee,2),te=ne[0],re=ne[1],ae=(0,d.useState)([]),ie=(0,c.Z)(ae,2),se=ie[0],oe=ie[1],ce=(0,d.useState)([]),ue=(0,c.Z)(ce,2),de=ue[0],le=ue[1],pe=(0,d.useState)({rrr_number:"",userId:"",activated:"",activatedby:"",amount:0,duration:0,gifshipId:0,gifshipTypeId:0,gifshipPackageId:0,activated_date:"",expired_date:""}),fe=(0,c.Z)(pe,2),he=fe[0],me=fe[1];(0,d.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.get("/users");case 3:t=e.sent,R(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.get("/gifship");case 3:t=e.sent,re(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();n(),e(),t.indexOf("ADD_RRR")>-1||W("/")}),[t,W,n]);var ve=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=n.target.value)){e.next=7;break}return e.next=5,u.Z.get("/gifshipLists/".concat(t));case 5:r=e.sent,oe(r.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),B(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),xe=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=n.target.value)){e.next=9;break}return e.next=5,u.Z.get("/gifshipPackageList/".concat(t));case 5:r=e.sent,le(r.data),e.next=10;break;case 9:le([]);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),B(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.target.value,e.next=4,u.Z.get("/gifshipPackage/".concat(t));case 4:r=e.sent,Q(r.data),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t,r,a,i,o,c,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n.target.value,e.next=4,u.Z.get("/register/".concat(a,"/userId"));case 4:return i=e.sent,O(i.data),e.next=8,u.Z.get("/user-rrr/".concat(a,"/0/"));case 8:o=e.sent,0===(null===(t=o.data[0])||void 0===t?void 0:t.length)&&q(!1),c=m()(null===(r=o.data[0])||void 0===r?void 0:r.expired_date).format("MMMM YYYY"),d=m()(),d.diff(c,"days")>-1?q(!1):(q(!0),$("You still have active payment on your account. If you continue it will override the existing one. Expired date: "+m()(o.data[0].expired_date).format("Do MMMM YYYY")),(0,v.Z)("You still have active payment on your account. If you continue it will override the existing one. Expired date: "+m()(o.data[0].expired_date).format("Do MMMM YYYY"),"warning")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),B(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(n){return e.apply(this,arguments)}}(),ye=function(e){me((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,a.Z)({},e.target.name,e.target.value))}))},be=function(e){return(0,I.jsxs)("html",{lang:"en",children:[(0,I.jsx)("h2",{children:"REGISTRATION CONFIRMATION"}),(0,I.jsx)("hr",{}),(0,I.jsxs)("body",{children:[(0,I.jsx)("p",{children:e}),(0,I.jsx)("hr",{}),"Thanks.",(0,I.jsx)("br",{}),"Management Team."]})]})},je=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,a,i,c,d,l,p,f,h,x,g,Z;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),P(!0),e.prev=2,r=document.getElementById("rrr_number").value,a=document.getElementById("userId").value,!0,i=null===n||void 0===n?void 0:n.id,c=document.getElementById("amount").value,document.getElementById("amt").value,d=document.getElementById("duration").value,l=document.getElementById("gifshipId").value,p=document.getElementById("gifshipTypeId").value,f=document.getElementById("gifshipPackageId").value,h=document.getElementById("activated_date").value,x=document.getElementById("minNumber").value,g=document.getElementById("maxNumber").value,Z=m()(Date.parse(h)+1e3*d*60*60*24).format("YYYY-MM-DD"),e.next=19,u.Z.post("/user-rrr/",{rrr_number:r,userId:a,activated:true,activatedby:i,amount:c,duration:d,gifshipId:l,gifshipTypeId:p,gifshipPackageId:f,activated_date:h,expired_date:Z,maxNumber:c/g,minNumber:x}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),t=n.data.id,r=k.x,e.next=5,u.Z.put("/activate/".concat(a,"/"),{}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.post("/code/",{userId:a,code:r,user_rrrId:t}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),(0,v.Z)("Your Code is: "+r,"success"),t=render(be("Congratulations! <br /> Your account has been created successfully. Please visit: <a href ='"+y.Z+"'>here </a> to login.<br /> Username is your registered email,<br /> password: password@123,<br /> registration code: "+r+"<br />"),{plainText:!0}),e.next=5,u.Z.post("sendmail/user/auth/email/send",{to:L,msg:t,subject:"Registration Confirmation"});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){P(!1),(0,v.Z)("Unable to renerate code: "+e,"error")}));case 2:(0,v.Z)("User activated successfuly","success");case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 5:(0,v.Z)("One record added successfuly","success"),W("/user-rrr/",{state:"ok"});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){P(!1),(0,v.Z)(e,"error")}));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),P(!1),B("Invalid data entry, check the entry and try again.");case 25:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(n){return e.apply(this,arguments)}}();return(0,I.jsx)(b.rb,{children:(0,I.jsx)(b.b7,{xs:12,style:{fontSize:"12px"},children:(0,I.jsxs)(b.xH,{className:"mb-12",children:[(0,I.jsx)(b.bn,{style:{backgroundColor:"skyblue"},children:(0,I.jsx)("strong",{style:{color:"white"},children:"MANAGE ENROLEE PAYMENT VIA RRR"})}),(0,I.jsx)(b.sl,{children:(0,I.jsxs)(j.q3,{add:"States",children:[(0,I.jsxs)(b.rb,{children:[(0,I.jsxs)(b.b7,{xs:!0,children:["RRR NO#",(0,I.jsx)(b.jO,{type:"text",id:"rrr_number",name:"rrr_number",placeholder:"RRR Number",onChange:ye})]}),(0,I.jsxs)(b.b7,{xs:!0,children:["Enrolee",(0,I.jsxs)(b.LX,{name:"userId",id:"userId",onChange:ye,onBlur:Ze,children:[(0,I.jsx)("option",{value:0,disabled:!0,selected:!0,children:"--select User--"}),0===C.length?"":C.map((function(e){return(0,I.jsxs)("option",{value:e.id,children:[e.surname,"  ",e.othername," - ",e.email," "]},e.id)}))]})]})]}),(0,I.jsxs)(b.rb,{children:[(0,I.jsxs)(b.b7,{xs:!0,children:["Programme",(0,I.jsxs)(b.LX,{name:"gifshipId",id:"gifshipId",onChange:ye,onBlur:ve,children:[(0,I.jsx)("option",{disabled:!0,children:"-- select --"}),0===te.length?"":te.map((function(e){return(0,I.jsx)("option",{value:e.id,selected:!0,children:e.name},e.id)}))]})]}),"  ",(0,I.jsxs)(b.b7,{xs:!0,children:["Sub-Programme",(0,I.jsxs)(b.LX,{name:"gifshipTypeId",id:"gifshipTypeId",onChange:ye,onBlur:xe,children:[(0,I.jsx)("option",{disabled:!0,children:"-- select --"}),0===se?"":se.map((function(e){return(0,I.jsx)("option",{value:e.id,selected:!0,children:e.name},e.id)}))]})]})]}),(0,I.jsxs)(b.rb,{children:[(0,I.jsxs)(b.b7,{xs:!0,children:["Package",(0,I.jsxs)(b.LX,{name:"gifshipPackageId",id:"gifshipPackageId",onChange:ye,onBlur:ge,children:[(0,I.jsx)("option",{disabled:!0,children:"-- select --"}),0===de.length?"":de.map((function(e){return(0,I.jsx)("option",{value:e.id,selected:!0,children:e.name},e.id)}))]})]}),(0,I.jsxs)(b.b7,{xs:!0,children:["Min. Amount",(0,I.jsx)(b.jO,{type:"number",name:"amt",id:"amt",value:(K.amount*K.qty).toFixed(2),readOnly:!0}),(0,I.jsx)(b.jO,{type:"hidden",name:"minNumber",id:"minNumber",value:K.qty,readOnly:!0}),(0,I.jsx)(b.jO,{type:"hidden",name:"maxNumber",id:"maxNumber",value:K.amount,readOnly:!0})]})]}),(0,I.jsxs)(b.rb,{children:[(0,I.jsxs)(b.b7,{xs:!0,children:["Duration in Days",(0,I.jsx)(b.jO,{type:"number",name:"duration",id:"duration",readOnly:!0,value:K.duration,onChange:ye})]}),(0,I.jsxs)(b.b7,{xs:!0,children:["Amount Paid",(0,I.jsx)(b.jO,{type:"number",name:"amount",id:"amount",value:he.amount,placeholder:"Amount paid",onChange:ye})]})]}),(0,I.jsxs)(b.rb,{children:[(0,I.jsxs)(b.b7,{xs:!0,children:["Start Date",(0,I.jsx)(b.jO,{type:"date",name:"activated_date",id:"activated_date",placeholder:"Start date",onChange:ye})]}),(0,I.jsx)(b.b7,{children:U&&(0,I.jsx)("span",{style:{color:"red"},children:V})})]}),(0,I.jsx)(b.rb,{children:(0,I.jsxs)(b.b7,{children:[(0,I.jsx)("br",{}),(null===t||void 0===t?void 0:t.indexOf("ADD_RRR"))>-1&&he.amount>=K.amount*K.qty&&he.amount%(K.amount*K.qty)===0?(0,I.jsxs)(x.Z,{direction:"row",spacing:1,children:[" ",(0,I.jsx)(g.Z,{size:"small",onClick:function(e){return je(e)},endIcon:(0,I.jsx)(Z.Z,{}),loading:w,loadingPosition:"end",variant:"contained",children:(0,I.jsx)("span",{children:"update"})}),(0,I.jsx)(f.Z,{url:"/user-rrr/"})]}):(0,I.jsx)(f.Z,{url:"/user-rrr/"}),(0,I.jsx)("span",{style:{color:"red",marginLeft:"20%"},children:_})]})})]})})]})})})},r()}catch(P){r(P)}}))},86711:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");n.Z=s},21686:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");n.Z=s},1582:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(4942),a=t(63366),i=t(87462),s=t(72791),o=t(30831),c=t(82466),u=t(94419),d=t(21217),l=(0,t(44046).ZP)(),p=t(67078),f=t(78519),h=t(85080),m=t(51184),v=t(45682),x=t(80184),g=["component","direction","spacing","divider","children","className","useFlexGap"],Z=(0,h.Z)(),y=l("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return n.root}});function b(e){return(0,p.Z)({props:e,name:"MuiStack",defaultTheme:Z})}function j(e,n){var t=s.Children.toArray(e).filter(Boolean);return t.reduce((function(e,r,a){return e.push(r),a<t.length-1&&e.push(s.cloneElement(n,{key:"separator-".concat(a)})),e}),[])}var k=function(e){var n=e.ownerState,t=e.theme,a=(0,i.Z)({display:"flex",flexDirection:"column"},(0,m.k9)({theme:t},(0,m.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var s=(0,v.hB)(t),o=Object.keys(t.breakpoints.values).reduce((function(e,t){return("object"===typeof n.spacing&&null!=n.spacing[t]||"object"===typeof n.direction&&null!=n.direction[t])&&(e[t]=!0),e}),{}),u=(0,m.P$)({values:n.direction,base:o}),d=(0,m.P$)({values:n.spacing,base:o});"object"===typeof u&&Object.keys(u).forEach((function(e,n,t){if(!u[e]){var r=n>0?u[t[n-1]]:"column";u[e]=r}}));a=(0,c.Z)(a,(0,m.k9)({theme:t},d,(function(e,t){return n.useFlexGap?{gap:(0,v.NA)(s,e)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":(0,r.Z)({},"margin".concat((a=t?u[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[a])),(0,v.NA)(s,e))};var a})))}return a=(0,m.dt)(t.breakpoints,a)};var I=t(66934),w=t(31402),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.createStyledComponent,t=void 0===n?y:n,r=e.useThemeProps,c=void 0===r?b:r,l=e.componentName,p=void 0===l?"MuiStack":l,h=t(k),m=s.forwardRef((function(e,n){var t=c(e),r=(0,f.Z)(t),s=r.component,l=void 0===s?"div":s,m=r.direction,v=void 0===m?"column":m,Z=r.spacing,y=void 0===Z?0:Z,b=r.divider,k=r.children,I=r.className,w=r.useFlexGap,P=void 0!==w&&w,S=(0,a.Z)(r,g),M={direction:v,spacing:y,useFlexGap:P},C=(0,u.Z)({root:["root"]},(function(e){return(0,d.Z)(p,e)}),{});return(0,x.jsx)(h,(0,i.Z)({as:l,ownerState:M,ref:n,className:(0,o.Z)(C.root,I)},S,{children:b?j(k,b):k}))}));return m}({createStyledComponent:(0,I.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return n.root}}),useThemeProps:function(e){return(0,w.Z)({props:e,name:"MuiStack"})}}),S=P},78519:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(93433),a=t(87462),i=t(63366),s=t(82466),o=t(87416),c=["sx"],u=function(e){var n,t,r={systemProps:{},otherProps:{}},a=null!=(n=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?n:o.Z;return Object.keys(e).forEach((function(n){a[n]?r.systemProps[n]=e[n]:r.otherProps[n]=e[n]})),r};function d(e){var n,t=e.sx,o=(0,i.Z)(e,c),d=u(o),l=d.systemProps,p=d.otherProps;return n=Array.isArray(t)?[l].concat((0,r.Z)(t)):"function"===typeof t?function(){var e=t.apply(void 0,arguments);return(0,s.P)(e)?(0,a.Z)({},l,e):l}:(0,a.Z)({},l,t),(0,a.Z)({},p,{sx:n})}},30831:function(e,n,t){function r(e){var n,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=r(e[n]))&&(a&&(a+=" "),a+=t);else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}n.Z=function(){for(var e,n,t=0,a="";t<arguments.length;)(e=arguments[t++])&&(n=r(e))&&(a&&(a+=" "),a+=n);return a}},25984:function(e,n,t){t.d(n,{kP:function(){return a}});var r=function(e){return crypto.getRandomValues(new Uint8Array(e))},a=function(e){return function(e,n,t){var r=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*r*n/e.length);return function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,s="";;)for(var o=t(a),c=a;c--;)if((s+=e[o[c]&r]||"").length===i)return s}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,r)}}}]);
//# sourceMappingURL=7538.81eea795.chunk.js.map