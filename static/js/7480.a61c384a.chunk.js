"use strict";(self.webpackChunknhia_client=self.webpackChunknhia_client||[]).push([[7480],{25781:function(e,n,r){var t=r(59860),i=r(57689),o=r(86711),s=r(80184);n.Z=function(e){var n=(0,i.s0)();return(0,s.jsx)(t.Z,{color:"secondary",onClick:function(r){n(e.url)},variant:"contained",style:{backgroundColor:"gray"},endIcon:(0,s.jsx)(o.Z,{}),loadingPosition:"end",children:(0,s.jsx)("span",{children:"CANCEL"})})}},27480:function(e,n,r){r.r(n);var t=r(93433),i=r(4942),o=r(1413),s=r(74165),c=r(15861),a=r(29439),l=r(8961),u=r(72791),d=r(1012),p=r(57689),f=r(11087),h=r(25781),x=r(22134),v=r(30459),m=(r(2323),r(21686)),Z=r(1582),j=r(59860),y=r(78983),b=r(1780),g=r(80184);n.default=function(){var e=(0,p.TH)(),n=(0,u.useState)(!1),r=(0,a.Z)(n,2),k=r[0],N=r[1],S=(0,u.useState)([{id:"",name:"",description:""}]),C=(0,a.Z)(S,2),P=C[0],w=C[1],O=(0,u.useState)([]),I=(0,a.Z)(O,2),R=I[0],A=I[1],E=(0,u.useState)([]),D=(0,a.Z)(E,2),U=D[0],M=D[1],T=(0,u.useContext)(d.V),z=T.currentUser,F=T.permissions,_=(0,p.s0)(),L=e.state,G=(0,u.useState)({name:"",userId:null===z||void 0===z?void 0:z.id,description:"",id:""}),B=(0,a.Z)(G,2),H=B[0],$=B[1];(0,u.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("/role/".concat(L)).then((function(e){$(e.data)})).catch((function(e){(0,v.Z)("Unable to load the role data","error")}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,v.Z)("Unable to load the role data","error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}(),n=[],r=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("/".concat(L,"/role-permissions")).then((function(e){e.data.map((function(e){return n.push(e.permissionId),n})),A(n)})).catch((function(e){(0,v.Z)("Unable to load the permission data","error")}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,v.Z)("Unable to load the permission data","error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}();F.indexOf("ADD_ROLES")>-1||_("/"),q(),e(),r()}),[F,L,_]);var q=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/permissions").then((function(e){w(e.data)})).catch((function(e){(0,v.Z)("Unable to load the permission data","error")}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(e){$((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,i.Z)({},e.target.name,e.target.value))}))},J=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var r,t,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),N(!0),r=document.getElementById("permlist").value,t=[],t=r.split(","),i=t.map((function(e,n){return Object.assign({permissionId:e,roleId:L})})),e.next=9,l.Z.post("/role-permissions/",i).then((function(e){N(!1),(0,v.Z)("Permission(s) assigned successfully","success"),_("/role/list")})).then((function(e){N(!1),(0,v.Z)(e,"error")}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,v.Z)("Invalid data entry, check the entry and try again","error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.target.id,e.next=4,l.Z.delete("/".concat(r,"/").concat(L,"/role-permissions")).then((function(e){(0,v.Z)("One record deleted succesfully","info"),_("/role/list")})).catch((function(e){(0,v.Z)(e,"error")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(0,v.Z)("Unable to delete the selected permission","error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsxs)(y.rb,{children:[(0,g.jsx)(y.b7,{xs:6,style:{fontSize:"12px"},children:(0,g.jsxs)(y.xH,{className:"mb-12",children:[(0,g.jsx)(y.bn,{style:{backgroundColor:"skyblue"},children:(0,g.jsx)("strong",{style:{color:"white"},children:"ASSIGN PERMISSIONS"})}),(0,g.jsx)(y.sl,{children:(0,g.jsxs)(b.q3,{add:"Assign Permissions",children:[(0,g.jsx)(y.rb,{children:(0,g.jsxs)(y.b7,{xs:!0,children:[(0,g.jsx)("label",{htmlFor:"name",children:"Role"}),(0,g.jsx)(y.jO,{type:"text",value:H.name,placeholder:H.name,readOnly:!0,name:"name",onChange:V})]})}),(0,g.jsx)(y.rb,{children:(0,g.jsxs)(y.b7,{xs:!0,children:[(0,g.jsx)("label",{htmlFor:"description",children:"Description"}),(0,g.jsx)(y.jO,{type:"text",placeholder:H.description,readOnly:!0,value:H.description,name:"description",onChange:V})]})}),(0,g.jsx)(y.rb,{children:(0,g.jsxs)(y.b7,{children:[" ",(0,g.jsx)("br",{}),F.indexOf("EDIT_ROLE")>-1?(0,g.jsxs)(Z.Z,{direction:"row",spacing:1,children:[" ",(0,g.jsx)(j.Z,{size:"small",onClick:function(e){return J(e)},endIcon:(0,g.jsx)(m.Z,{}),loading:k,loadingPosition:"end",variant:"contained",children:"Update"}),(0,g.jsx)(h.Z,{url:"/role/list"})]}):(0,g.jsx)(h.Z,{url:"/role/list"})]})})]})})]})}),(0,g.jsx)(y.b7,{xs:6,style:{fontSize:"12px"},children:(0,g.jsxs)(y.xH,{className:"mb-12",children:[(0,g.jsx)(y.bn,{style:{backgroundColor:"skyblue"},children:(0,g.jsx)("strong",{style:{color:"white"},children:"PERMISSIONS"})}),(0,g.jsx)(y.sl,{children:(0,g.jsxs)(b.q3,{add:"Permissions",children:[(0,g.jsxs)(y.Sx,{striped:!0,style:{fontSize:"12px"},align:"middle",responsive:!0,children:[(0,g.jsx)(y.V,{children:(0,g.jsxs)(y.T6,{children:[(0,g.jsx)(y.is,{children:(0,g.jsx)("input",{type:"checkbox",id:"selectAll",checked:U.length===P.length,onChange:function(e){M(e.target.checked?P.map((function(e){return e.id})):[])}})}),(0,g.jsx)(y.is,{children:"Name"}),(0,g.jsx)(y.is,{children:"Description"}),(0,g.jsx)(y.is,{})]})}),(0,g.jsx)(y.NR,{children:0===P.length?"":P.map((function(e){return R.indexOf(e.id)>-1?(0,g.jsxs)(y.T6,{children:[(0,g.jsx)(y.NN,{children:(0,g.jsx)(f.rU,{style:{color:"green"},children:(0,g.jsx)(x.dFs,{})})}),(0,g.jsx)(y.NN,{children:e.name}),(0,g.jsx)(y.NN,{children:e.description}),(0,g.jsx)(y.NN,{children:F.indexOf("ADD_ROLES")>-1?(0,g.jsx)(f.rU,{style:{color:"red",textDecoration:"none"},onClick:K,state:e.id,id:e.id+"_"+L,children:"Remove"}):""})]},e.id):(0,g.jsxs)(y.T6,{children:[(0,g.jsx)(y.NN,{children:(0,g.jsx)("input",{type:"checkbox",id:e.id,checked:U.includes(e.id),onChange:function(n){return function(e,n){M((function(r){return e.target.checked?[].concat((0,t.Z)(r),[n.id]):r.filter((function(e){return e!==n.id}))}))}(n,e)},value:e.id,name:"ck"})}),(0,g.jsx)(y.NN,{children:e.name}),(0,g.jsx)(y.NN,{children:e.description}),(0,g.jsx)(y.NN,{})]},e.id)}))})]}),(0,g.jsx)(y.jO,{type:"hidden",name:"permlist",id:"permlist",value:U.join(",")})]})})]})})]})}},86711:function(e,n,r){var t=r(64836);n.Z=void 0;var i=t(r(45649)),o=r(80184),s=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");n.Z=s},21686:function(e,n,r){var t=r(64836);n.Z=void 0;var i=t(r(45649)),o=r(80184),s=(0,i.default)((0,o.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");n.Z=s},1582:function(e,n,r){r.d(n,{Z:function(){return P}});var t=r(4942),i=r(63366),o=r(87462),s=r(72791),c=r(30831),a=r(82466),l=r(94419),u=r(21217),d=(0,r(44046).ZP)(),p=r(67078),f=r(78519),h=r(85080),x=r(51184),v=r(45682),m=r(80184),Z=["component","direction","spacing","divider","children","className","useFlexGap"],j=(0,h.Z)(),y=d("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return n.root}});function b(e){return(0,p.Z)({props:e,name:"MuiStack",defaultTheme:j})}function g(e,n){var r=s.Children.toArray(e).filter(Boolean);return r.reduce((function(e,t,i){return e.push(t),i<r.length-1&&e.push(s.cloneElement(n,{key:"separator-".concat(i)})),e}),[])}var k=function(e){var n=e.ownerState,r=e.theme,i=(0,o.Z)({display:"flex",flexDirection:"column"},(0,x.k9)({theme:r},(0,x.P$)({values:n.direction,breakpoints:r.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var s=(0,v.hB)(r),c=Object.keys(r.breakpoints.values).reduce((function(e,r){return("object"===typeof n.spacing&&null!=n.spacing[r]||"object"===typeof n.direction&&null!=n.direction[r])&&(e[r]=!0),e}),{}),l=(0,x.P$)({values:n.direction,base:c}),u=(0,x.P$)({values:n.spacing,base:c});"object"===typeof l&&Object.keys(l).forEach((function(e,n,r){if(!l[e]){var t=n>0?l[r[n-1]]:"column";l[e]=t}}));i=(0,a.Z)(i,(0,x.k9)({theme:r},u,(function(e,r){return n.useFlexGap?{gap:(0,v.NA)(s,e)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":(0,t.Z)({},"margin".concat((i=r?l[r]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i])),(0,v.NA)(s,e))};var i})))}return i=(0,x.dt)(r.breakpoints,i)};var N=r(66934),S=r(31402),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.createStyledComponent,r=void 0===n?y:n,t=e.useThemeProps,a=void 0===t?b:t,d=e.componentName,p=void 0===d?"MuiStack":d,h=r(k),x=s.forwardRef((function(e,n){var r=a(e),t=(0,f.Z)(r),s=t.component,d=void 0===s?"div":s,x=t.direction,v=void 0===x?"column":x,j=t.spacing,y=void 0===j?0:j,b=t.divider,k=t.children,N=t.className,S=t.useFlexGap,C=void 0!==S&&S,P=(0,i.Z)(t,Z),w={direction:v,spacing:y,useFlexGap:C},O=(0,l.Z)({root:["root"]},(function(e){return(0,u.Z)(p,e)}),{});return(0,m.jsx)(h,(0,o.Z)({as:d,ownerState:w,ref:n,className:(0,c.Z)(O.root,N)},P,{children:b?g(k,b):k}))}));return x}({createStyledComponent:(0,N.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return n.root}}),useThemeProps:function(e){return(0,S.Z)({props:e,name:"MuiStack"})}}),P=C},78519:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(93433),i=r(87462),o=r(63366),s=r(82466),c=r(87416),a=["sx"],l=function(e){var n,r,t={systemProps:{},otherProps:{}},i=null!=(n=null==e||null==(r=e.theme)?void 0:r.unstable_sxConfig)?n:c.Z;return Object.keys(e).forEach((function(n){i[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t};function u(e){var n,r=e.sx,c=(0,o.Z)(e,a),u=l(c),d=u.systemProps,p=u.otherProps;return n=Array.isArray(r)?[d].concat((0,t.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,s.P)(e)?(0,i.Z)({},d,e):d}:(0,i.Z)({},d,r),(0,i.Z)({},p,{sx:n})}},30831:function(e,n,r){function t(e){var n,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(r=t(e[n]))&&(i&&(i+=" "),i+=r);else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.Z=function(){for(var e,n,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(n=t(e))&&(i&&(i+=" "),i+=n);return i}}}]);
//# sourceMappingURL=7480.a61c384a.chunk.js.map