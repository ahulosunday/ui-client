"use strict";(self.webpackChunknhia_client=self.webpackChunknhia_client||[]).push([[2803],{25781:function(e,n,t){var r=t(59860),a=t(57689),i=t(86711),s=t(80184);n.Z=function(e){var n=(0,a.s0)();return(0,s.jsx)(r.Z,{color:"secondary",onClick:function(t){n(e.url)},variant:"contained",style:{backgroundColor:"gray"},endIcon:(0,s.jsx)(i.Z,{}),loadingPosition:"end",children:(0,s.jsx)("span",{children:"CANCEL"})})}},56848:function(e,n,t){t.d(n,{x:function(){return r}});var r=(0,t(25984).kP)("1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ0987654321",10)},82803:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(4942),a=t(1413),i=t(74165),s=t(15861),o=t(29439),c=t(8961),u=t(72791),d=t(1012),l=t(57689),p=t(25781),f=t(72426),h=t.n(f),m=(t(2323),t(30459)),v=t(1582),x=t(59860),g=t(21686),Z=t(78983),y=t(1780),b=t(56848),j=t(80184),k=function(){var e=(0,u.useContext)(d.V),n=e.currentUser,t=e.permissions,f=(0,u.useState)(!1),k=(0,o.Z)(f,2),I=k[0],w=k[1],P=(0,u.useState)([]),S=(0,o.Z)(P,2),M=S[0],C=S[1],R=(0,u.useState)([]),E=(0,o.Z)(R,2),N=(E[0],E[1]),O=(0,u.useState)(""),Y=(0,o.Z)(O,2),A=Y[0],_=Y[1],B=(0,u.useState)(n.email),T=(0,o.Z)(B,2),D=T[0],L=(T[1],(0,u.useState)(!1)),F=(0,o.Z)(L,2),G=F[0],U=F[1],q=(0,u.useState)(""),z=(0,o.Z)(q,2),X=z[0],V=z[1],$=(0,u.useState)(0),H=(0,o.Z)($,2),J=H[0],K=H[1],Q=(0,l.s0)(),W=(0,u.useState)([]),ee=(0,o.Z)(W,2),ne=ee[0],te=ee[1],re=(0,u.useState)([]),ae=(0,o.Z)(re,2),ie=ae[0],se=ae[1],oe=(0,u.useState)([]),ce=(0,o.Z)(oe,2),ue=ce[0],de=ce[1],le=(0,u.useState)({rrr_number:"",userId:"",activated:"",activatedby:"",amount:0,duration:0,gifshipId:0,gifshipTypeId:0,gifshipPackageId:0,activated_date:"",expired_date:""}),pe=(0,o.Z)(le,2),fe=pe[0],he=pe[1];(0,u.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/users");case 3:t=e.sent,C(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/gifship");case 3:t=e.sent,te(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();n(),e(),t.indexOf("ADD_RRR")>-1||Q("/")}),[t,Q,n]);var me=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=n.target.value)){e.next=7;break}return e.next=5,c.Z.get("/gifshipLists/".concat(t));case 5:r=e.sent,se(r.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),_(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),ve=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=n.target.value)){e.next=9;break}return e.next=5,c.Z.get("/gifshipPackageList/".concat(t));case 5:r=e.sent,de(r.data),e.next=10;break;case 9:de([]);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),_(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}(),xe=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.target.value,e.next=4,c.Z.get("/gifshipPackage/".concat(t));case 4:r=e.sent,K(r.data),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r,a,s,o,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n.target.value,e.next=4,c.Z.get("/register/".concat(a,"/userId"));case 4:return s=e.sent,N(s.data),e.next=8,c.Z.get("/user-rrr/".concat(a,"/0/"));case 8:o=e.sent,0===(null===(t=o.data[0])||void 0===t?void 0:t.length)&&U(!1),u=h()(null===(r=o.data[0])||void 0===r?void 0:r.expired_date).format("MMMM YYYY"),d=h()(),d.diff(u,"days")>-1?U(!1):(U(!0),V("You still have active payment on your account. If you continue it will override the existing one. Expired date: "+h()(o.data[0].expired_date).format("Do MMMM YYYY")),(0,m.Z)("You still have active payment on your account. If you continue it will override the existing one. Expired date: "+h()(o.data[0].expired_date).format("Do MMMM YYYY"),"warning")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),_(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(n){return e.apply(this,arguments)}}(),Ze=function(e){he((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,r.Z)({},e.target.name,e.target.value))}))},ye=function(e){return(0,j.jsxs)("html",{lang:"en",children:[(0,j.jsx)("h2",{children:"REGISTRATION CONFIRMATION"}),(0,j.jsx)("hr",{}),(0,j.jsxs)("body",{children:[(0,j.jsx)("p",{children:e}),(0,j.jsx)("hr",{}),"Thanks.",(0,j.jsx)("br",{}),"Management Team."]})]})},be=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var r,a,o,u,d,l,p,f,v,x,g,Z;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,r=document.getElementById("rrr_number").value,a=document.getElementById("userId").value,!0,o=null===n||void 0===n?void 0:n.id,u=document.getElementById("amount").value,document.getElementById("amt").value,d=document.getElementById("duration").value,l=document.getElementById("gifshipId").value,p=document.getElementById("gifshipTypeId").value,f=document.getElementById("gifshipPackageId").value,v=document.getElementById("activated_date").value,x=document.getElementById("minNumber").value,g=document.getElementById("maxNumber").value,Z=h()(Date.parse(v)+1e3*d*60*60*24).format("YYYY-MM-DD"),e.next=19,c.Z.post("/user-rrr/",{rrr_number:r,userId:a,activated:true,activatedby:o,amount:u,duration:d,gifshipId:l,gifshipTypeId:p,gifshipPackageId:f,activated_date:v,expired_date:Z,maxNumber:u/g,minNumber:x}).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),t=n.data.id,r=b.x,e.next=5,c.Z.put("/activate/".concat(a,"/"),{}).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post("/code/",{userId:a,code:r,user_rrrId:t}).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),(0,m.Z)("Your Code is: "+r,"success"),t=render(ye("Congratulations! <br /> Your account has been created successfully. Please visit: <a href ='https://'>here </a> to login.<br /> Username is your registered email,<br /> password: password@123,<br /> registration code: "+r+"<br />"),{plainText:!0}),e.next=5,c.Z.post("sendmail/user/auth/email/send",{to:D,msg:t,subject:"Registration Confirmation"});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){w(!1),(0,m.Z)("Unable to renerate code: "+e,"error")}));case 2:(0,m.Z)("User activated successfuly","success");case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 5:(0,m.Z)("One record added successfuly","success"),Q("/user-rrr/",{state:"ok"});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){w(!1),(0,m.Z)(e,"error")}));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),w(!1),_("Invalid data entry, check the entry and try again.");case 25:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(n){return e.apply(this,arguments)}}();return(0,j.jsx)(Z.rb,{children:(0,j.jsx)(Z.b7,{xs:12,style:{fontSize:"12px"},children:(0,j.jsxs)(Z.xH,{className:"mb-12",children:[(0,j.jsx)(Z.bn,{style:{backgroundColor:"skyblue"},children:(0,j.jsx)("strong",{style:{color:"white"},children:"MANAGE ENROLEE PAYMENT VIA RRR"})}),(0,j.jsx)(Z.sl,{children:(0,j.jsxs)(y.q3,{add:"States",children:[(0,j.jsxs)(Z.rb,{children:[(0,j.jsxs)(Z.b7,{xs:!0,children:["RRR NO#",(0,j.jsx)(Z.jO,{type:"text",id:"rrr_number",name:"rrr_number",placeholder:"RRR Number",onChange:Ze})]}),(0,j.jsxs)(Z.b7,{xs:!0,children:["Enrolee",(0,j.jsxs)(Z.LX,{name:"userId",id:"userId",onChange:Ze,onBlur:ge,children:[(0,j.jsx)("option",{value:0,disabled:!0,selected:!0,children:"--select User--"}),0===M.length?"":M.map((function(e){return(0,j.jsxs)("option",{value:e.id,children:[e.surname,"  ",e.othername," - ",e.email," "]},e.id)}))]})]})]}),(0,j.jsxs)(Z.rb,{children:[(0,j.jsxs)(Z.b7,{xs:!0,children:["Programme",(0,j.jsxs)(Z.LX,{name:"gifshipId",id:"gifshipId",onChange:Ze,onBlur:me,children:[(0,j.jsx)("option",{disabled:!0,children:"-- select --"}),0===ne.length?"":ne.map((function(e){return(0,j.jsx)("option",{value:e.id,selected:!0,children:e.name},e.id)}))]})]}),"  ",(0,j.jsxs)(Z.b7,{xs:!0,children:["Sub-Programme",(0,j.jsxs)(Z.LX,{name:"gifshipTypeId",id:"gifshipTypeId",onChange:Ze,onBlur:ve,children:[(0,j.jsx)("option",{disabled:!0,children:"-- select --"}),0===ie?"":ie.map((function(e){return(0,j.jsx)("option",{value:e.id,selected:!0,children:e.name},e.id)}))]})]})]}),(0,j.jsxs)(Z.rb,{children:[(0,j.jsxs)(Z.b7,{xs:!0,children:["Package",(0,j.jsxs)(Z.LX,{name:"gifshipPackageId",id:"gifshipPackageId",onChange:Ze,onBlur:xe,children:[(0,j.jsx)("option",{disabled:!0,children:"-- select --"}),0===ue.length?"":ue.map((function(e){return(0,j.jsx)("option",{value:e.id,selected:!0,children:e.name},e.id)}))]})]}),(0,j.jsxs)(Z.b7,{xs:!0,children:["Min. Amount",(0,j.jsx)(Z.jO,{type:"number",name:"amt",id:"amt",value:(J.amount*J.qty).toFixed(2),readOnly:!0}),(0,j.jsx)(Z.jO,{type:"hidden",name:"minNumber",id:"minNumber",value:J.qty,readOnly:!0}),(0,j.jsx)(Z.jO,{type:"hidden",name:"maxNumber",id:"maxNumber",value:J.amount,readOnly:!0})]})]}),(0,j.jsxs)(Z.rb,{children:[(0,j.jsxs)(Z.b7,{xs:!0,children:["Duration in Days",(0,j.jsx)(Z.jO,{type:"number",name:"duration",id:"duration",readOnly:!0,value:J.duration,onChange:Ze})]}),(0,j.jsxs)(Z.b7,{xs:!0,children:["Amount Paid",(0,j.jsx)(Z.jO,{type:"number",name:"amount",id:"amount",value:fe.amount,placeholder:"Amount paid",onChange:Ze})]})]}),(0,j.jsxs)(Z.rb,{children:[(0,j.jsxs)(Z.b7,{xs:!0,children:["Start Date",(0,j.jsx)(Z.jO,{type:"date",name:"activated_date",id:"activated_date",placeholder:"Start date",onChange:Ze})]}),(0,j.jsx)(Z.b7,{children:G&&(0,j.jsx)("span",{style:{color:"red"},children:X})})]}),(0,j.jsx)(Z.rb,{children:(0,j.jsxs)(Z.b7,{children:[(0,j.jsx)("br",{}),(null===t||void 0===t?void 0:t.indexOf("ADD_RRR"))>-1&&fe.amount>=J.amount*J.qty&&fe.amount%(J.amount*J.qty)===0?(0,j.jsxs)(v.Z,{direction:"row",spacing:1,children:[" ",(0,j.jsx)(x.Z,{size:"small",onClick:function(e){return be(e)},endIcon:(0,j.jsx)(g.Z,{}),loading:I,loadingPosition:"end",variant:"contained",children:(0,j.jsx)("span",{children:"update"})}),(0,j.jsx)(p.Z,{url:"/user-rrr/"})]}):(0,j.jsx)(p.Z,{url:"/user-rrr/"}),(0,j.jsx)("span",{style:{color:"red",marginLeft:"20%"},children:A})]})})]})})]})})})}},86711:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");n.Z=s},21686:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");n.Z=s},1582:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(4942),a=t(63366),i=t(87462),s=t(72791),o=t(30831),c=t(82466),u=t(94419),d=t(21217),l=(0,t(44046).ZP)(),p=t(67078),f=t(78519),h=t(85080),m=t(51184),v=t(45682),x=t(80184),g=["component","direction","spacing","divider","children","className","useFlexGap"],Z=(0,h.Z)(),y=l("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return n.root}});function b(e){return(0,p.Z)({props:e,name:"MuiStack",defaultTheme:Z})}function j(e,n){var t=s.Children.toArray(e).filter(Boolean);return t.reduce((function(e,r,a){return e.push(r),a<t.length-1&&e.push(s.cloneElement(n,{key:"separator-".concat(a)})),e}),[])}var k=function(e){var n=e.ownerState,t=e.theme,a=(0,i.Z)({display:"flex",flexDirection:"column"},(0,m.k9)({theme:t},(0,m.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var s=(0,v.hB)(t),o=Object.keys(t.breakpoints.values).reduce((function(e,t){return("object"===typeof n.spacing&&null!=n.spacing[t]||"object"===typeof n.direction&&null!=n.direction[t])&&(e[t]=!0),e}),{}),u=(0,m.P$)({values:n.direction,base:o}),d=(0,m.P$)({values:n.spacing,base:o});"object"===typeof u&&Object.keys(u).forEach((function(e,n,t){if(!u[e]){var r=n>0?u[t[n-1]]:"column";u[e]=r}}));a=(0,c.Z)(a,(0,m.k9)({theme:t},d,(function(e,t){return n.useFlexGap?{gap:(0,v.NA)(s,e)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":(0,r.Z)({},"margin".concat((a=t?u[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[a])),(0,v.NA)(s,e))};var a})))}return a=(0,m.dt)(t.breakpoints,a)};var I=t(66934),w=t(31402),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.createStyledComponent,t=void 0===n?y:n,r=e.useThemeProps,c=void 0===r?b:r,l=e.componentName,p=void 0===l?"MuiStack":l,h=t(k),m=s.forwardRef((function(e,n){var t=c(e),r=(0,f.Z)(t),s=r.component,l=void 0===s?"div":s,m=r.direction,v=void 0===m?"column":m,Z=r.spacing,y=void 0===Z?0:Z,b=r.divider,k=r.children,I=r.className,w=r.useFlexGap,P=void 0!==w&&w,S=(0,a.Z)(r,g),M={direction:v,spacing:y,useFlexGap:P},C=(0,u.Z)({root:["root"]},(function(e){return(0,d.Z)(p,e)}),{});return(0,x.jsx)(h,(0,i.Z)({as:l,ownerState:M,ref:n,className:(0,o.Z)(C.root,I)},S,{children:b?j(k,b):k}))}));return m}({createStyledComponent:(0,I.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return n.root}}),useThemeProps:function(e){return(0,w.Z)({props:e,name:"MuiStack"})}}),S=P},78519:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(93433),a=t(87462),i=t(63366),s=t(82466),o=t(87416),c=["sx"],u=function(e){var n,t,r={systemProps:{},otherProps:{}},a=null!=(n=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?n:o.Z;return Object.keys(e).forEach((function(n){a[n]?r.systemProps[n]=e[n]:r.otherProps[n]=e[n]})),r};function d(e){var n,t=e.sx,o=(0,i.Z)(e,c),d=u(o),l=d.systemProps,p=d.otherProps;return n=Array.isArray(t)?[l].concat((0,r.Z)(t)):"function"===typeof t?function(){var e=t.apply(void 0,arguments);return(0,s.P)(e)?(0,a.Z)({},l,e):l}:(0,a.Z)({},l,t),(0,a.Z)({},p,{sx:n})}},30831:function(e,n,t){function r(e){var n,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=r(e[n]))&&(a&&(a+=" "),a+=t);else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}n.Z=function(){for(var e,n,t=0,a="";t<arguments.length;)(e=arguments[t++])&&(n=r(e))&&(a&&(a+=" "),a+=n);return a}},25984:function(e,n,t){t.d(n,{kP:function(){return a}});var r=function(e){return crypto.getRandomValues(new Uint8Array(e))},a=function(e){return function(e,n,t){var r=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*r*n/e.length);return function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,s="";;)for(var o=t(a),c=a;c--;)if((s+=e[o[c]&r]||"").length===i)return s}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,r)}}}]);
//# sourceMappingURL=2803.0f53dcc8.chunk.js.map