"use strict";(self.webpackChunknhia_client=self.webpackChunknhia_client||[]).push([[6796],{25781:function(e,n,t){var r=t(59860),s=t(57689),a=t(86711),i=t(80184);n.Z=function(e){var n=(0,s.s0)();return(0,i.jsx)(r.Z,{color:"secondary",onClick:function(t){n(e.url)},variant:"contained",style:{backgroundColor:"gray"},endIcon:(0,i.jsx)(a.Z,{}),loadingPosition:"end",children:(0,i.jsx)("span",{children:"CANCEL"})})}},46796:function(e,n,t){t.r(n);var r=t(93433),s=t(4942),a=t(1413),i=t(74165),c=t(15861),l=t(29439),o=t(8961),d=t(72791),u=t(1012),h=t(57689),x=t(25781),p=t(22134),j=t(78983),f=t(1780),b=t(80184);n.default=function(){var e=(0,h.TH)(),n=(0,d.useState)(""),t=(0,l.Z)(n,2),m=t[0],C=t[1],v=(0,d.useState)([{id:"",name:"",description:""}]),Z=(0,l.Z)(v,2),y=Z[0],k=Z[1],S=(0,d.useState)([]),g=(0,l.Z)(S,2),I=g[0],D=g[1],T=(0,d.useState)([]),E=(0,l.Z)(T,2),w=E[0],O=E[1],N=(0,d.useContext)(u.V),R=N.currentUser,A=N.permissions,M=(0,h.s0)(),P=e.state,z=(0,d.useState)({name:"",userId:null===R||void 0===R?void 0:R.id,description:"",id:""}),G=(0,l.Z)(z,2),H=G[0],L=G[1];(0,d.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("/role/".concat(P));case 3:t=e.sent,L(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),n=[],t=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("/".concat(P,"/role-permissions"));case 3:e.sent.data.map((function(e){n.push(e.permissionId)})),D(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();A.indexOf("ADD_ROLES")>-1||M("/"),_(),e(),t()}),[A,P,M]);var _=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("/permissions");case 2:t=e.sent,k(t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),F=function(e){L((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,s.Z)({},e.target.name,e.target.value))}))},q=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(n){var t,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=document.getElementById("permlist").value,r=[],r=t.split(","),s=r.map((function(e,n){return Object.assign({permissionId:e,roleId:P})})),e.next=7,o.Z.post("/role-permissions/",s);case 7:e.sent&&M("/role/list"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C(e.t0.message+": Invalid data entry, check the entry and try again");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),B=function(e,n){O((function(t){return e.target.checked?[].concat((0,r.Z)(t),[n.id]):t.filter((function(e){return e!==n.id}))}))};return(0,b.jsxs)(j.rb,{children:[(0,b.jsx)(j.b7,{xs:6,style:{fontSize:"12px"},children:(0,b.jsxs)(j.xH,{className:"mb-12",children:[(0,b.jsx)(j.bn,{style:{backgroundColor:"skyblue"},children:(0,b.jsx)("strong",{style:{color:"white"},children:"EDIT ASSIGNED PERMISSIONS"})}),(0,b.jsx)(j.sl,{children:(0,b.jsxs)(f.q3,{add:"EDIT ASSIGNED PERMISSIONS",children:[(0,b.jsx)(j.rb,{children:(0,b.jsxs)(j.b7,{xs:!0,children:[(0,b.jsx)("label",{htmlFor:"name",children:"Role"}),(0,b.jsx)(j.jO,{type:"text",value:H.name,placeholder:H.name,readOnly:!0,name:"name",onChange:F})]})}),(0,b.jsx)(j.rb,{children:(0,b.jsxs)(j.b7,{children:[(0,b.jsx)("label",{htmlFor:"description",children:"Description"}),(0,b.jsx)(j.jO,{type:"text",placeholder:H.description,readOnly:!0,value:H.description,name:"description",onChange:F})]})}),(0,b.jsx)(j.rb,{children:(0,b.jsxs)(j.b7,{children:[A.indexOf("EDIT_ROLE")>-1?(0,b.jsx)("button",{type:"button",onClick:q,children:"Update"}):"",(0,b.jsx)(x.Z,{url:"/role/list"}),(0,b.jsx)("span",{children:m})]})})]})})]})}),(0,b.jsx)(j.b7,{xs:6,style:{fontSize:"12px"},children:(0,b.jsxs)(j.xH,{className:"mb-12",children:[(0,b.jsx)(j.bn,{style:{backgroundColor:"skyblue"},children:(0,b.jsx)("strong",{style:{color:"white"},children:"EDIT ASSIGNED PERMISSIONS"})}),(0,b.jsx)(j.sl,{children:(0,b.jsxs)(f.q3,{add:"EDIT ASSIGNED PERMISSIONS",children:[(0,b.jsxs)(CTable,{children:[(0,b.jsx)(CTableHead,{children:(0,b.jsxs)(CTableRow,{children:[(0,b.jsx)(CTableDataCell,{children:(0,b.jsx)("input",{type:"checkbox",id:"selectAll",checked:w.length===y.length,onChange:function(e){O(e.target.checked?y.map((function(e){return e.id})):[])}})}),(0,b.jsx)(CTableDataCell,{children:"Name"}),(0,b.jsx)(CTableDataCell,{children:"Description"})]})}),(0,b.jsx)(CTableBody,{children:y.map((function(e){return I.indexOf(e.id)>-1?(0,b.jsxs)(CTableRow,{children:[(0,b.jsxs)(CTableDataCell,{children:[(0,b.jsx)("a",{style:{color:"red"},children:(0,b.jsx)(p.dFs,{})}),(0,b.jsx)("input",{type:"checkbox",id:e.id,checked:w.includes(e.id),onChange:function(n){return B(n,e)},value:e.id,name:"ck"})]}),(0,b.jsx)(CTableDataCell,{children:e.name}),(0,b.jsx)(CTableDataCell,{children:e.description})]}):(0,b.jsxs)(CTableRow,{children:[(0,b.jsx)(CTableDataCell,{children:(0,b.jsx)("input",{type:"checkbox",id:e.id,checked:w.includes(e.id),onChange:function(n){return B(n,e)},value:e.id,name:"ck"})}),(0,b.jsx)(CTableDataCell,{children:e.name}),(0,b.jsx)(CTableDataCell,{children:e.description})]})}))})]}),(0,b.jsx)("input",{type:"hidden",name:"permlist",id:"permlist",value:w.join(",")})]})})]})})]})}},86711:function(e,n,t){var r=t(64836);n.Z=void 0;var s=r(t(45649)),a=t(80184),i=(0,s.default)((0,a.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");n.Z=i}}]);
//# sourceMappingURL=6796.ef4a5981.chunk.js.map