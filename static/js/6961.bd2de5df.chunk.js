(self.webpackChunknhia_client=self.webpackChunknhia_client||[]).push([[6961],{56848:function(e,t,n){"use strict";n.d(t,{C:function(){return a},x:function(){return r}});var r=(0,n(25984).kP)("1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ0987654321",10),a=n(42414)(11)},5985:function(e,t){"use strict";t.Z="https://www.google.com"},73393:function(e,t,n){"use strict";n.a(e,(async function(e,r){try{n.r(t),n.d(t,{default:function(){return C}});var a=n(74165),i=n(15861),s=n(29439),c=n(72791),u=n(36151),o=n(38372),d=n(5289),l=n(97123),f=n(39157),h=n(51691),p=n(65661),m=n(30459),Z=n(72426),x=n.n(Z),v=n(57689),g=n(11087),y=n(99126),b=n(56848),w=n(81250),j=n(5985),k=n(80184),I=e([y]);function C(e){var t=c.useState(!1),n=(0,s.Z)(t,2),r=n[0],Z=n[1],I=c.useState([]),Y=(0,s.Z)(I,2),C=Y[0],M=Y[1],D=(0,v.s0)(),E=c.useState(0),N=(0,s.Z)(E,2),S=N[0],_=N[1],B=c.useState([]),T=(0,s.Z)(B,2),F=T[0],P=T[1],U=c.useState(!1),L=(0,s.Z)(U,2),R=L[0],W=L[1],q=function(){Z(!1)},A=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n,r,s,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("number").value,n=document.getElementById("sdate").value,r=document.getElementById("amount").value,s=b.C,(c=document.getElementById("continue")).innerHTML="contacting payment gateway, please wait ...",c.disabled=!0,(0,m.Z)("Transaction completed with status: OK, Registration details has been sent to your email ...","success"),"OK",u=x()(Date.parse(n)+1e3*F.duration*60*60*24).format("YYYY-MM-DD"),e.next=13,y.Z.post("/user-rrr/",{rrr_number:s,userId:C.id,activated:1,activatedby:C.id,amount:r,duration:F.duration,gifshipId:F.gifshipId,gifshipTypeId:F.gifshipTypeId,gifshipPackageId:F.id,activated_date:n,expired_date:u,maxNumber:t,minNumber:t}).then(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.id,e.next=3,y.Z.put("/activate/".concat(C.id,"/"),{}).then(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Z.post("/code/0",{user_rrrId:n,userId:C.id,code:s}).then((function(e){})).catch((function(e){})).then(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,w.s)((0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h2",{children:"Congratulations!"}),(0,k.jsxs)("p",{children:["Your account has been created successfully.",(0,k.jsx)("br",{}),"Username: ",C.username," ",(0,k.jsx)("br",{}),"password: ****** ",(0,k.jsx)("br",{})," Registration code: ",s,(0,k.jsx)("br",{}),"Visit ",(0,k.jsx)("a",{href:j.Z,children:"here"})," to login"]})]})),e.next=3,y.Z.post("/sendmail/user/auth/email/send",{to:C.email,msg:n,subject:"Registration Confirmation"});case 3:D("/login");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(0,m.Z)("Something went wrong ...","error")}));case 13:e.next=18;break;case 15:c.innerHTML="continue",c.disabled=!1,(0,m.Z)("Transaction completed with status: FAILED ...","error");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("number").value,r=e.option,t.prev=2,t.next=5,y.Z.get("/findUserByUsername/".concat(e.user,"/1/1/1/1")).then(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(t.data),e.next=3,y.Z.get("/user-rrr/".concat(t.data.id,"/0/"));case 3:i=e.sent,0===(null===(n=i.data[0])||void 0===n?void 0:n.length)&&W(!0),s=x()(null===(r=i.data[0])||void 0===r?void 0:r.expired_date).format("MMMM YYYY"),c=x()(),c.diff(s,"days")>-1?W(!0):(W(!1),(0,m.Z)("You still have active payment on your account. If you continue it will override the existing one. Expired date: "+x()(i.data[0].expired_date).format("Do MMMM YYYY"),"warning"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(0,m.Z)(e,"warning")}));case 5:return t.next=7,y.Z.get("/gifshipPackage/".concat(r)).then((function(e){P(e.data),n>e.data.maxNumber?((0,m.Z)("please choose another package ...","error"),W(!1)):n<e.data.qty?(_(e.data.qty*e.data.amount),W(!0)):n>e.data.qty&&(_(n*e.data.amount),W(!0))})).catch((function(e){(0,m.Z)(e.message,"error")}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),(0,m.Z)(t.t0.message,"error");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();return(0,k.jsxs)("div",{children:[(0,k.jsx)(g.rU,{onClick:function(){Z(!0)},style:{textDecoration:"none"},children:e.name}),(0,k.jsxs)(d.Z,{open:r,onClose:q,children:[(0,k.jsxs)(p.Z,{children:["[",e.name,"] inprogress ..."]}),(0,k.jsxs)(f.Z,{children:[(0,k.jsx)(h.Z,{children:"Please enter the Number of enrolee ..."}),(0,k.jsx)(o.Z,{autoFocus:!0,margin:"dense",id:"number",label:"Number of Enrolee ",type:"number",onChange:H,fullWidth:!0,variant:"standard"}),(0,k.jsx)(o.Z,{"aria-readonly":!0,margin:"dense",label:"Amount Due",type:"text",value:"N"+Intl.NumberFormat().format(S),fullWidth:!0,variant:"standard"}),(0,k.jsx)(o.Z,{id:"amount",type:"hidden",value:S}),(0,k.jsx)(o.Z,{margin:"dense",id:"sdate",label:"Start Date",type:"date",fullWidth:!0,variant:"standard"})]}),(0,k.jsxs)(l.Z,{children:[(0,k.jsx)(u.Z,{onClick:q,children:"Cancel"}),R?(0,k.jsx)(u.Z,{onClick:A,id:"continue",children:"Continue"}):""]})]})]})}y=(I.then?(await I)():I)[0],r()}catch(Y){r(Y)}}))},75950:function(){}}]);
//# sourceMappingURL=6961.bd2de5df.chunk.js.map