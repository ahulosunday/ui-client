"use strict";(self.webpackChunknhia_client=self.webpackChunknhia_client||[]).push([[6796],{25781:function(e,n,t){var r=t(59860),s=t(57689),a=t(86711),i=t(80184);n.Z=function(e){var n=(0,s.s0)();return(0,i.jsx)(r.Z,{color:"secondary",onClick:function(t){n(e.url)},variant:"contained",style:{backgroundColor:"gray"},endIcon:(0,i.jsx)(a.Z,{}),loadingPosition:"end",children:(0,i.jsx)("span",{children:"CANCEL"})})}},46796:function(e,n,t){t.a(e,(async function(e,r){try{t.r(n);var s=t(93433),a=t(4942),i=t(1413),c=t(74165),l=t(15861),o=t(29439),d=t(99126),u=t(72791),h=t(1012),x=t(57689),p=t(25781),j=t(22134),f=t(78983),b=t(59930),m=t(80184),C=e([d,h,b]);[d,h,b]=C.then?(await C)():C;n.default=function(){var e=(0,x.TH)(),n=(0,u.useState)(""),t=(0,o.Z)(n,2),r=t[0],C=t[1],v=(0,u.useState)([{id:"",name:"",description:""}]),y=(0,o.Z)(v,2),Z=y[0],k=y[1],S=(0,u.useState)([]),g=(0,o.Z)(S,2),I=g[0],D=g[1],T=(0,u.useState)([]),E=(0,o.Z)(T,2),w=E[0],O=E[1],N=(0,u.useContext)(h.V),R=N.currentUser,A=N.permissions,M=(0,x.s0)(),P=e.state,z=(0,u.useState)({name:"",userId:null===R||void 0===R?void 0:R.id,description:"",id:""}),G=(0,o.Z)(z,2),H=G[0],L=G[1];(0,u.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("/role/".concat(P));case 3:t=e.sent,L(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),n=[],t=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("/".concat(P,"/role-permissions"));case 3:e.sent.data.map((function(e){n.push(e.permissionId)})),D(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();A.indexOf("ADD_ROLES")>-1||M("/"),_(),e(),t()}),[A,P,M]);var _=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get("/permissions");case 2:t=e.sent,k(t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),F=function(e){L((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,a.Z)({},e.target.name,e.target.value))}))},q=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){var t,r,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=document.getElementById("permlist").value,r=[],r=t.split(","),s=r.map((function(e,n){return Object.assign({permissionId:e,roleId:P})})),e.next=7,d.Z.post("/role-permissions/",s);case 7:e.sent&&M("/role/list"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C(e.t0.message+": Invalid data entry, check the entry and try again");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),B=function(e,n){O((function(t){return e.target.checked?[].concat((0,s.Z)(t),[n.id]):t.filter((function(e){return e!==n.id}))}))};return(0,m.jsxs)(f.rb,{children:[(0,m.jsx)(f.b7,{md:12,xs:12,xl:6,style:{fontSize:"12px"},children:(0,m.jsxs)(f.xH,{className:"mb-12",children:[(0,m.jsx)(f.bn,{style:{backgroundColor:"skyblue"},children:(0,m.jsx)("strong",{style:{color:"white"},children:"EDIT ASSIGNED PERMISSIONS"})}),(0,m.jsx)(f.sl,{children:(0,m.jsxs)(b.q3,{add:"EDIT ASSIGNED PERMISSIONS",children:[(0,m.jsx)(f.rb,{children:(0,m.jsxs)(f.b7,{xs:!0,children:[(0,m.jsx)("label",{htmlFor:"name",children:"Role"}),(0,m.jsx)(f.jO,{type:"text",value:H.name,placeholder:H.name,readOnly:!0,name:"name",onChange:F})]})}),(0,m.jsx)(f.rb,{children:(0,m.jsxs)(f.b7,{children:[(0,m.jsx)("label",{htmlFor:"description",children:"Description"}),(0,m.jsx)(f.jO,{type:"text",placeholder:H.description,readOnly:!0,value:H.description,name:"description",onChange:F})]})}),(0,m.jsx)(f.rb,{children:(0,m.jsxs)(f.b7,{children:[A.indexOf("EDIT_ROLE")>-1?(0,m.jsx)("button",{type:"button",onClick:q,children:"Update"}):"",(0,m.jsx)(p.Z,{url:"/role/list"}),(0,m.jsx)("span",{children:r})]})})]})})]})}),(0,m.jsx)(f.b7,{xs:6,style:{fontSize:"12px"},children:(0,m.jsxs)(f.xH,{className:"mb-12",children:[(0,m.jsx)(f.bn,{style:{backgroundColor:"skyblue"},children:(0,m.jsx)("strong",{style:{color:"white"},children:"EDIT ASSIGNED PERMISSIONS"})}),(0,m.jsx)(f.sl,{children:(0,m.jsxs)(b.q3,{add:"EDIT ASSIGNED PERMISSIONS",children:[(0,m.jsxs)(CTable,{children:[(0,m.jsx)(CTableHead,{children:(0,m.jsxs)(CTableRow,{children:[(0,m.jsx)(CTableDataCell,{children:(0,m.jsx)("input",{type:"checkbox",id:"selectAll",checked:w.length===Z.length,onChange:function(e){O(e.target.checked?Z.map((function(e){return e.id})):[])}})}),(0,m.jsx)(CTableDataCell,{children:"Name"}),(0,m.jsx)(CTableDataCell,{children:"Description"})]})}),(0,m.jsx)(CTableBody,{children:Z.map((function(e){return I.indexOf(e.id)>-1?(0,m.jsxs)(CTableRow,{children:[(0,m.jsxs)(CTableDataCell,{children:[(0,m.jsx)("a",{style:{color:"red"},children:(0,m.jsx)(j.dFs,{})}),(0,m.jsx)("input",{type:"checkbox",id:e.id,checked:w.includes(e.id),onChange:function(n){return B(n,e)},value:e.id,name:"ck"})]}),(0,m.jsx)(CTableDataCell,{children:e.name}),(0,m.jsx)(CTableDataCell,{children:e.description})]}):(0,m.jsxs)(CTableRow,{children:[(0,m.jsx)(CTableDataCell,{children:(0,m.jsx)("input",{type:"checkbox",id:e.id,checked:w.includes(e.id),onChange:function(n){return B(n,e)},value:e.id,name:"ck"})}),(0,m.jsx)(CTableDataCell,{children:e.name}),(0,m.jsx)(CTableDataCell,{children:e.description})]})}))})]}),(0,m.jsx)("input",{type:"hidden",name:"permlist",id:"permlist",value:w.join(",")})]})})]})})]})},r()}catch(v){r(v)}}))},86711:function(e,n,t){var r=t(64836);n.Z=void 0;var s=r(t(45649)),a=t(80184),i=(0,s.default)((0,a.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");n.Z=i}}]);
//# sourceMappingURL=6796.93a8fee3.chunk.js.map